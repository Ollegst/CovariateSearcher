% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/scm-selective-forward.R
\name{resume_selective_forward}
\alias{resume_selective_forward}
\title{Resume SCM selective forward selection workflow from a saved checkpoint}
\usage{
resume_selective_forward(
  checkpoint_file,
  forward_p_value = NULL,
  rse_threshold = NULL,
  auto_submit = TRUE,
  auto_retry = TRUE,
  continue_forward = TRUE
)
}
\arguments{
\item{checkpoint_file}{Character. Path to the RDS file containing saved search state
(e.g., "scm_selective_step_3.rds", "scm_forward_selection_complete.rds")}

\item{forward_p_value}{Numeric. P-value for forward selection significance testing.
If NULL, uses value from search_state$search_config$forward_p_value (default: 0.05)}

\item{rse_threshold}{Numeric. Maximum acceptable RSE threshold as percentage.
If NULL, uses value from search_state$search_config$max_rse_threshold (default: 50)}

\item{auto_submit}{Logical. Whether to automatically resubmit incomplete models
found in the last step (default: TRUE)}

\item{auto_retry}{Logical. Whether to enable automatic retry creation for failed
models during resubmission (default: TRUE)}

\item{continue_forward}{Logical. Whether to automatically continue forward selection
if possible, or just load and prepare the state (default: TRUE)}
}
\value{
List containing:
\itemize{
\item \code{search_state} - Updated search state with current model statuses
\item \code{status} - Resume status: "ready", "ready_to_continue", "forward_complete", "no_completed_models"
\item \code{best_model} - Current best model across all completed steps
\item \code{best_model_step} - Step number where best model was found
\item \code{best_model_ofv} - OFV of the best model
\item \code{last_step} - Last step number found in database
\item \code{next_step} - Suggested next step number (if continuing)
\item \code{redemption_suggested} - Whether redemption phase is recommended
\item \code{message} - Descriptive message about resume status
}
}
\description{
Loads a previously saved search state and continues selective forward
selection from where it left off. Can handle incomplete models, update statuses,
and determine the appropriate next step (continue forward selection or start
redemption phase). Provides flexible resumption options for interrupted workflows.
}
\details{
Resume Selective Forward Selection from Checkpoint

This function performs the following operations:
\enumerate{
\item Loads the checkpoint file and validates search state structure
\item Determines the last completed step and identifies incomplete models
\item Updates model statuses from NONMEM output files
\item Optionally resubmits incomplete models if auto_submit=TRUE
\item Identifies the current best model (lowest OFV) across all steps
\item Determines appropriate next action:
\itemize{
\item Continue forward selection if significant models exist in last step
\item Suggest redemption phase if best model is from earlier step
\item Mark as complete if no significant improvements possible
}
\item Provides recommendations for next steps based on current state
}
}
\section{Checkpoint Files}{

Common checkpoint files created by selective forward selection:
\itemize{
\item \code{scm_selective_step_N.rds} - Saved after each completed step
\item \code{scm_selective_complete.rds} - Final state after completion
\item \code{scm_redemption_N.rds} - Saved during redemption phase
}
}

\section{Resume Scenarios}{

\describe{
\item{Incomplete Models}{If models from the last step are still running or failed,
they will be updated and optionally resubmitted}
\item{Continue Forward}{If significant models exist in last step and best model
is from that step, forward selection can continue}
\item{Redemption Phase}{If best model is from an earlier step, redemption
testing of remaining covariates is suggested}
\item{Complete}{If no significant models exist in last step and best model
is from that step, forward selection is complete}
}
}

\examples{
\dontrun{
# Resume from step 3 checkpoint and continue automatically
result <- resume_selective_forward("scm_selective_step_3.rds")
search_state <- result$search_state

# Resume with custom thresholds, just load state without continuing
result <- resume_selective_forward(
  checkpoint_file = "scm_selective_step_5.rds",
  forward_p_value = 0.01,
  rse_threshold = 40,
  continue_forward = FALSE
)

# Resume and resubmit incomplete models without auto-retry
result <- resume_selective_forward(
  checkpoint_file = "scm_selective_step_2.rds",
  auto_submit = TRUE,
  auto_retry = FALSE
)

# Check what would happen next without actually continuing
status <- resume_selective_forward(
  checkpoint_file = "scm_selective_complete.rds",
  continue_forward = FALSE
)
cat("Status:", status$status)
cat("Best model:", status$best_model)
cat("Redemption suggested:", status$redemption_suggested)
}
}
\seealso{
\code{\link{run_scm_selective_forward}} for starting selective forward selection,
\code{\link{save_search_state}} for creating checkpoint files,
\code{\link{get_significant_models_from_step}} for analyzing step results
}
